<p-dialog
  [header]="trainer.firstname + ' ' + trainer.lastname + ' órarendje'"
  [resizable]="false"
  [modal]="true"
  [(visible)]="dialogVisible"
  [style]="{ width: '75vw' }"
  [contentStyle]="{ height: '300px' }"
>
  <div class="card">
    <p-toast></p-toast>
    <p-toolbar *ngIf="loggedInUser && loggedInUser.role === 'TRAINER'">
      <button
        pButton
        pRipple
        label="Új óra hozzáadása"
        icon="pi pi-plus"
        class="p-button-success mr-2"
        (click)="openNew()"
      ></button>
    </p-toolbar>
    <p-table
      [value]="scheduleList | async"
      [tableStyle]="{ 'min-width': '50rem' }"
      styleClass="p-datatable-striped"
    >
      <ng-template pTemplate="header">
        <tr>
          <th>Hétfő</th>
          <th>Kedd</th>
          <th>Szerda</th>
          <th>Csütörtök</th>
          <th>Péntek</th>
          <th>Szombat</th>
          <th>Vasárnap</th>
        </tr>
      </ng-template>
      <ng-template
        pTemplate="body"
        let-schedule
        let-editing="editing"
        let-ri="rowIndex"
      >
        <tr>
          <td *ngIf="schedule.day === 0">
            {{ schedule.start }} - {{ schedule.end }}
          </td>
          <td *ngIf="schedule.day === 1">
            {{ schedule.start }} - {{ schedule.end }}
          </td>
          <td *ngIf="schedule.day === 2">
            {{ schedule.start }} - {{ schedule.end }}
          </td>
          <td *ngIf="schedule.day === 3">
            {{ schedule.start }} - {{ schedule.end }}
          </td>
          <td *ngIf="schedule.day === 4">
            {{ schedule.start }} - {{ schedule.end }}
          </td>
          <td *ngIf="schedule.day === 5">
            {{ schedule.start }} - {{ schedule.end }}
          </td>
          <td *ngIf="schedule.day === 6">
            {{ schedule.start }} - {{ schedule.end }}
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
  <ng-template pTemplate="footer">
    <button
      type="button"
      pButton
      pRipple
      icon="pi pi-times"
      (click)="scheduleClosed()"
      label="Bezárás"
      class="p-button-text"
    ></button>
  </ng-template>
</p-dialog>

<form #editScheduleForm="ngForm">
  <p-dialog
    [(visible)]="newScheduleDialog"
    [style]="{ width: '450px' }"
    header="Új óra felvitele"
    [modal]="true"
    styleClass="p-fluid"
  >
    <ng-template pTemplate="content">
      <div class="field">
        <label for="day">Nap</label>
        <p-dropdown
          [options]="dayList"
          [(ngModel)]="newSchedule.day"
          name="day"
          [required]="true"
          [autofocus]="true"
          [filter]="true"
          
        >
        </p-dropdown>
      </div>
      <div class="field">
        <label for="start">Óra kezdete</label>
        <input
          type="text"
          pInputText
          id="start"
          name="start"
          [(ngModel)]="newSchedule.start"
          required
          autofocus
        />
      </div>
      <div class="field">
        <label for="end">Óra vége</label>
        <input
          type="text"
          pInputText
          id="end"
          name="end"
          [(ngModel)]="newSchedule.end"
          required
        />
      </div>
      <div class="field">
        <label for="picture">Óra típusa</label>
        <input
          id="picture"
          name="picture"
          type="text"
          pInputText
          [(ngModel)]="newSchedule.type"
          required
        />
      </div>
    </ng-template>
    <ng-template pTemplate="footer">
      <button
        pButton
        pRipple
        label="Vissza"
        icon="pi pi-times"
        class="p-button-text"
        (click)="hideEditedDialog()"
      ></button>
      <button
        pButton
        pRipple
        label="Mentés"
        icon="pi pi-check"
        class="p-button-text"
        [disabled]="!editScheduleForm.valid"
        (click)="saveSchedule()"
      ></button>
      <!-- <button
      pButton
      pRipple
      label="Törlés"
      icon="pi pi-trash"
      class="p-button-text"
      (click)="deleteSchedule()"
    ></button> -->
    </ng-template>
  </p-dialog>
</form>
